(()=>{"use strict";const e=document.querySelector(".add-task"),t=document.querySelector(".modal"),a=document.querySelector(".overlay"),r=document.getElementById("submit"),o=document.querySelector("[data-form-title]"),s=document.querySelector("[data-form-description]"),d=document.querySelector("[data-form-due-date]"),n=document.querySelector("[data-form-priority]"),i=document.querySelector(".title-msg");function c(){o.value="",s.value="",d.value="",n.value="low",o.classList.remove("error"),i.innerHTML="",r.innerText="Submit"}function l(){t.classList.add("show"),a.classList.add("show")}function u(){t.classList.remove("show"),a.classList.remove("show")}const m=document.querySelector(".modal-task-info"),y=document.querySelector(".overlay-task"),v=document.querySelector(".all-projects"),f=document.querySelector(".overlay-burger"),k=document.getElementById("hamburger"),p=document.querySelector("[data-projects]"),S=document.querySelector("[data-new-project-form]"),L=document.querySelector("[data-new-project-input]"),g=document.querySelector("[data-delete-project-btn]"),q=document.querySelector("[data-form-title]"),h=document.querySelector("[data-form-description]"),D=document.querySelector("[data-form-due-date]"),w=document.querySelector("[data-form-priority]"),E=document.querySelector(".title-msg"),I=document.getElementById("input-todo"),j=document.getElementById("cancel"),T=document.getElementById("submit"),x=document.querySelector("[data-project-display-container]"),b=document.querySelector("[data-project-title]"),C=document.querySelector("[data-tasks]"),N=document.getElementById("task-template"),B="task.projects",H="task.selectedProjectId";let M=(B,JSON.parse(localStorage.getItem("task.projects"))||[]);let P=(H,localStorage.getItem("task.selectedProjectId"));let J=null;function O(){var e,t;t=M,localStorage.setItem("task.projects",JSON.stringify(t)),e=P,localStorage.setItem("task.selectedProjectId",e),$()}function $(){z(p),M.forEach((e=>{const t=document.createElement("li");t.dataset.projID=e.id,t.classList.add("project-name"),t.innerText=e.name,e.id===P&&t.classList.add("active-project"),p.appendChild(t)}));const e=M.find((e=>e.id===P));null==P||"null"==P?x.classList.add("hide"):(x.classList.remove("hide"),b.innerText=e.name,z(C),function(e){e.tasks.forEach((e=>{const t=document.importNode(N.content,!0),a=t.querySelector("div"),r=t.querySelector(".task-title"),o=t.querySelector(".task-dueDate"),s=t.querySelector(".edit-task"),d=t.querySelector(".delete-task");a.dataset.taskID=e.id,s.dataset.taskID=e.id,d.dataset.taskID=e.id,r.dataset.taskID=e.id,r.innerText=e.title,o.innerText=e.dueDate,C.appendChild(t)}))}(e))}function z(e){for(;e.firstChild;)e.removeChild(e.firstChild)}k.addEventListener("click",(e=>{v.classList.add("show"),f.classList.add("show")})),f.addEventListener("click",(e=>{v.classList.remove("show"),f.classList.remove("show")})),e.addEventListener("click",(e=>{"Submit"!==r.innerText&&c(),l()})),a.addEventListener("click",(e=>{u()})),y.addEventListener("click",(e=>{m.classList.remove("show"),y.classList.remove("show")})),p.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(P=e.target.dataset.projID,O())})),C.addEventListener("click",(e=>{if("div"===e.target.tagName.toLowerCase()||"task-title"===e.target.className){const t=e.target.dataset.taskID,a=M.find((e=>e.id===P)).tasks.find((e=>e.id===t));m.classList.add("show"),y.classList.add("show"),function(e){const t=document.querySelector(".modal-task .task-title p"),a=document.querySelector(".modal-task .task-description"),r=document.querySelector(".modal-task .task-dueDate"),o=document.querySelector(".priority");t.innerText=e.title,""===e.description?a.innerText="No Description":a.innerText=e.description,""===e.dueDate?r.innerText="":r.innerHTML=`<strong>Due Date</strong>: ${e.dueDate}`;const s=e.priority;"high"===s?o.style.color="green":"medium"===s?o.style.color="orange":"low"===s&&(o.style.color="red")}(a)}if("delete-task fa fa-trash"===e.target.className.toLowerCase()){const t=e.target.dataset.taskID,a=M.find((e=>e.id===P));a.tasks=a.tasks.filter((e=>e.id!==t)),O()}if("edit-task fa fa-pencil-square-o"===e.target.className.toLowerCase()){const a=e.target.dataset.taskID;J=a;const r=M.find((e=>e.id===P)).tasks.find((e=>e.id===a));T.innerText="Edit",l(),t=r,q.value=t.title,h.value=t.description,D.value=t.dueDate,w.value=t.priority}var t})),S.addEventListener("submit",(e=>{e.preventDefault();const t=L.value;if(null==t||""===t)return;const a=(r=t,{id:Date.now().toString(),name:r,tasks:[]});var r;M.push(a),L.value=null,O()})),g.addEventListener("click",(e=>{M=M.filter((e=>e.id!==P)),P=null,O()})),j.addEventListener("click",(e=>{u(),c()})),I.addEventListener("submit",(e=>{if(e.preventDefault(),null==q.value||""===q.value)return q.classList.add("error"),void(E.innerHTML="Please include a title");const t=q.value,a=h.value,r=D.value,o=w.value;if("Submit"===T.innerText){const e=function(e,t,a,r){return{id:Date.now().toString(),title:e,description:t,dueDate:a,priority:r}}(t,a,r,o);M.find((e=>e.id===P)).tasks.push(e)}if("Edit"===T.innerText){const e=M.find((e=>e.id===P)).tasks.find((e=>e.id===J));e.title=t,e.description=a,e.dueDate=r,e.priority=o,J=null}O(),u(),c()})),q.addEventListener("keydown",(e=>{""!==q.value&&(q.classList.remove("error"),E.innerHTML="")})),$()})();