(()=>{"use strict";const e=document.querySelector(".add-task"),t=document.querySelector(".modal"),r=document.querySelector(".overlay");function a(){t.classList.remove("show"),r.classList.remove("show")}const o=document.querySelector("[data-projects]"),c=document.querySelector("[data-new-project-form]"),n=document.querySelector("[data-new-project-input]"),d=document.querySelector("[data-delete-project-btn]"),l=document.querySelector("[data-form-title]"),s=document.querySelector("[data-form-description]"),i=document.querySelector("[data-form-due-date]"),u=document.querySelector("[data-form-priority]"),m=document.querySelector(".title-msg"),v=document.querySelector("[data-project-display-container]"),p=document.querySelector("[data-project-title]"),y=document.querySelector("[data-tasks]"),S=document.getElementById("cancel"),f=document.getElementById("submit"),k=document.getElementById("task-template"),L="task.projects",q="task.selectedProjectId";let g=(L,JSON.parse(localStorage.getItem("task.projects"))||[]);let j=(q,localStorage.getItem("task.selectedProjectId"));function h(){var e,t;t=g,localStorage.setItem("task.projects",JSON.stringify(t)),e=j,localStorage.setItem("task.selectedProjectId",e),E()}function E(){I(o),g.forEach((e=>{const t=document.createElement("li");t.dataset.projID=e.id,t.classList.add("project-name"),t.innerText=e.name,e.id===j&&t.classList.add("active-project"),o.appendChild(t)}));const e=g.find((e=>e.id===j));null==j||"null"==j?v.classList.add("hide"):(v.classList.remove("hide"),p.innerText=e.name,I(y),function(e){e.tasks.forEach((e=>{const t=document.importNode(k.content,!0),r=t.querySelector(".task-title"),a=t.querySelector(".task-dueDate");document.querySelector(".edit-task"),document.querySelector(".delete-task"),r.innerText=e.title,a.innerText=e.dueDate,y.appendChild(t)}))}(e))}function I(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function w(){l.value="",s.value="",i.value="",u.value="low",l.classList.remove("error"),m.innerHTML=""}o.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(j=e.target.dataset.projID,h())})),c.addEventListener("submit",(e=>{e.preventDefault();const t=n.value;if(null==t||""===t)return;const r=(a=t,{id:Date.now().toString(),name:a,tasks:[]});var a;g.push(r),n.value=null,h()})),d.addEventListener("click",(e=>{g=g.filter((e=>e.id!==j)),j=null,h()})),S.addEventListener("click",(e=>{a(),w()})),f.addEventListener("click",(e=>{if(null==l.value||""===l.value)return l.classList.add("error"),void(m.innerHTML="Please include a title");const t=(r=l.value,o=s.value,c=i.value,n=u.value,{id:Date.now().toString(),title:r,description:o,dueDate:c,priority:n});var r,o,c,n;g.find((e=>e.id===j)).tasks.push(t),h(),a(),w()})),l.addEventListener("keydown",(e=>{""!==l.value&&(l.classList.remove("error"),m.innerHTML="")})),e.addEventListener("click",(e=>{t.classList.add("show"),r.classList.add("show")})),r.addEventListener("click",(e=>{a()})),E()})();