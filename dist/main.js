(()=>{"use strict";const e=document.querySelector(".add-task"),t=document.querySelector(".modal"),a=document.querySelector(".overlay"),r=document.getElementById("submit"),o=document.querySelector("[data-form-title]"),d=document.querySelector("[data-form-description]"),s=document.querySelector("[data-form-due-date]"),n=document.querySelector("[data-form-priority]"),i=document.querySelector(".title-msg");function c(){o.value="",d.value="",s.value="",n.value="low",o.classList.remove("error"),i.innerHTML="",r.innerText="Submit"}function l(){t.classList.add("show"),a.classList.add("show")}function u(){t.classList.remove("show"),a.classList.remove("show")}const m=document.querySelector(".all-projects"),f=document.querySelector(".overlay-burger"),v=document.getElementById("hamburger"),y=document.querySelector("[data-projects]"),p=document.querySelector("[data-new-project-form]"),k=document.querySelector("[data-new-project-input]"),S=document.querySelector("[data-delete-project-btn]"),L=document.querySelector("[data-form-title]"),g=document.querySelector("[data-form-description]"),q=document.querySelector("[data-form-due-date]"),h=document.querySelector("[data-form-priority]"),E=document.querySelector(".title-msg"),I=document.querySelector("[data-project-display-container]"),w=document.querySelector("[data-project-title]"),j=document.querySelector("[data-tasks]"),D=document.getElementById("input-todo"),T=document.getElementById("cancel"),b=document.getElementById("submit"),x=document.getElementById("task-template"),C="task.projects",N="task.selectedProjectId";let B=(C,JSON.parse(localStorage.getItem("task.projects"))||[]);let P=(N,localStorage.getItem("task.selectedProjectId"));let H=null;function M(){var e,t;t=B,localStorage.setItem("task.projects",JSON.stringify(t)),e=P,localStorage.setItem("task.selectedProjectId",e),J()}function J(){O(y),B.forEach((e=>{const t=document.createElement("li");t.dataset.projID=e.id,t.classList.add("project-name"),t.innerText=e.name,e.id===P&&t.classList.add("active-project"),y.appendChild(t)}));const e=B.find((e=>e.id===P));null==P||"null"==P?I.classList.add("hide"):(I.classList.remove("hide"),w.innerText=e.name,O(j),function(e){e.tasks.forEach((e=>{const t=document.importNode(x.content,!0),a=t.querySelector("div"),r=t.querySelector(".task-title"),o=t.querySelector(".task-dueDate"),d=t.querySelector(".edit-task"),s=t.querySelector(".delete-task");a.dataset.taskID=e.id,d.dataset.taskID=e.id,s.dataset.taskID=e.id,r.innerText=e.title,o.innerText=e.dueDate,j.appendChild(t)}))}(e))}function O(e){for(;e.firstChild;)e.removeChild(e.firstChild)}v.addEventListener("click",(e=>{m.classList.add("show"),f.classList.add("show")})),f.addEventListener("click",(e=>{m.classList.remove("show"),f.classList.remove("show")})),e.addEventListener("click",(e=>{"Submit"!==r.innerText&&c(),l()})),a.addEventListener("click",(e=>{u()})),y.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(P=e.target.dataset.projID,M())})),j.addEventListener("click",(e=>{if("div"===e.target.tagName.toLowerCase()){const t=e.target.dataset.taskID,a=B.find((e=>e.id===P)).tasks.find((e=>e.id===t));console.log(a)}if("delete-task fa fa-trash"===e.target.className.toLowerCase()){const t=e.target.dataset.taskID,a=B.find((e=>e.id===P));a.tasks=a.tasks.filter((e=>e.id!==t)),M()}if("edit-task fa fa-pencil-square-o"===e.target.className.toLowerCase()){console.log("edit this");const a=e.target.dataset.taskID;H=a;const r=B.find((e=>e.id===P)).tasks.find((e=>e.id===a));b.innerText="Edit",l(),t=r,L.value=t.title,g.value=t.description,q.value=t.dueDate,h.value=t.priority}var t})),p.addEventListener("submit",(e=>{e.preventDefault();const t=k.value;if(null==t||""===t)return;const a=(r=t,{id:Date.now().toString(),name:r,tasks:[]});var r;B.push(a),k.value=null,M()})),S.addEventListener("click",(e=>{B=B.filter((e=>e.id!==P)),P=null,M()})),T.addEventListener("click",(e=>{u(),c()})),D.addEventListener("submit",(e=>{if(e.preventDefault(),null==L.value||""===L.value)return L.classList.add("error"),void(E.innerHTML="Please include a title");const t=L.value,a=g.value,r=q.value,o=h.value;if("Submit"===b.innerText){const e=function(e,t,a,r){return{id:Date.now().toString(),title:e,description:t,dueDate:a,priority:r}}(t,a,r,o);B.find((e=>e.id===P)).tasks.push(e)}if("Edit"===b.innerText){const e=B.find((e=>e.id===P)).tasks.find((e=>e.id===H));e.title=t,e.description=a,e.dueDate=r,e.priority=o,H=null}M(),u(),c()})),L.addEventListener("keydown",(e=>{""!==L.value&&(L.classList.remove("error"),E.innerHTML="")})),J()})();