(()=>{"use strict";const e=document.querySelector(".add-task"),t=document.querySelector(".modal"),a=document.querySelector(".overlay");function r(){t.classList.remove("show"),a.classList.remove("show")}const s=document.querySelector(".all-projects"),o=document.querySelector(".overlay-burger"),d=document.getElementById("hamburger"),c=document.querySelector("[data-projects]"),n=document.querySelector("[data-new-project-form]"),l=document.querySelector("[data-new-project-input]"),i=document.querySelector("[data-delete-project-btn]"),u=document.querySelector("[data-form-title]"),m=document.querySelector("[data-form-description]"),v=document.querySelector("[data-form-due-date]"),k=document.querySelector("[data-form-priority]"),y=document.querySelector(".title-msg"),f=document.querySelector("[data-project-display-container]"),p=document.querySelector("[data-project-title]"),L=document.querySelector("[data-tasks]"),S=document.getElementById("input-todo"),g=document.getElementById("cancel"),q=document.getElementById("task-template"),h="task.projects",E="task.selectedProjectId";let I=(h,JSON.parse(localStorage.getItem("task.projects"))||[]);let j=(E,localStorage.getItem("task.selectedProjectId"));function w(){var e,t;t=I,localStorage.setItem("task.projects",JSON.stringify(t)),e=j,localStorage.setItem("task.selectedProjectId",e),D()}function D(){C(c),I.forEach((e=>{const t=document.createElement("li");t.dataset.projID=e.id,t.classList.add("project-name"),t.innerText=e.name,e.id===j&&t.classList.add("active-project"),c.appendChild(t)}));const e=I.find((e=>e.id===j));null==j||"null"==j?f.classList.add("hide"):(f.classList.remove("hide"),p.innerText=e.name,C(L),function(e){e.tasks.forEach((e=>{const t=document.importNode(q.content,!0),a=t.querySelector("div"),r=t.querySelector(".task-title"),s=t.querySelector(".task-dueDate"),o=t.querySelector(".edit-task"),d=t.querySelector(".delete-task");a.dataset.taskID=e.id,o.dataset.taskID=e.id,d.dataset.taskID=e.id,r.innerText=e.title,s.innerText=e.dueDate,L.appendChild(t)}))}(e))}function C(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function T(){u.value="",m.value="",v.value="",k.value="low",u.classList.remove("error"),y.innerHTML=""}d.addEventListener("click",(e=>{s.classList.add("show"),o.classList.add("show")})),o.addEventListener("click",(e=>{s.classList.remove("show"),o.classList.remove("show")})),e.addEventListener("click",(e=>{t.classList.add("show"),a.classList.add("show")})),a.addEventListener("click",(e=>{r()})),c.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(j=e.target.dataset.projID,w())})),L.addEventListener("click",(e=>{if("div"===e.target.tagName.toLowerCase()){const t=e.target.dataset.taskID,a=I.find((e=>e.id===j)).tasks.find((e=>e.id===t));console.log(a)}if("delete-task fa fa-trash"===e.target.className.toLowerCase()){const t=e.target.dataset.taskID,a=I.find((e=>e.id===j));a.tasks=a.tasks.filter((e=>e.id!==t)),w()}})),n.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;if(null==t||""===t)return;const a=(r=t,{id:Date.now().toString(),name:r,tasks:[]});var r;I.push(a),l.value=null,w()})),i.addEventListener("click",(e=>{I=I.filter((e=>e.id!==j)),j=null,w()})),g.addEventListener("click",(e=>{r(),T()})),S.addEventListener("submit",(e=>{if(e.preventDefault(),null==u.value||""===u.value)return u.classList.add("error"),void(y.innerHTML="Please include a title");const t=(a=u.value,s=m.value,o=v.value,d=k.value,{id:Date.now().toString(),title:a,description:s,dueDate:o,priority:d});var a,s,o,d;I.find((e=>e.id===j)).tasks.push(t),w(),r(),T()})),u.addEventListener("keydown",(e=>{""!==u.value&&(u.classList.remove("error"),y.innerHTML="")})),D()})();